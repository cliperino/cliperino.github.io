{"version":3,"sources":["../../src/pages/clip/clip.module.ts","../../src/pages/clip/clip.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAyC;AACO;AAEd;AACyB;AACa;AAiBxE;IAAA;IAA6B,CAAC;IAAjB,cAAc;QAf1B,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,uDAAQ;aACT;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,uDAAQ,CAAC;gBAClC,4EAAW,CAAC,OAAO,EAAE;gBACrB,yFAAe,CAAC,OAAO,EAAE;aAC1B;YACD,SAAS,EAAE,EACV;YACD,eAAe,EAAE;gBACf,uDAAQ;aACT;SACF,CAAC;OACW,cAAc,CAAG;IAAD,qBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;ACtB3B,UAAU;AACmE;AACZ;AACvB;AACe;AAEzD,cAAc;AACkD;AACE;AACF;AAEF;AAS9D;IAOC,kBACW,OAAsB,EACtB,SAAoB,EACpB,OAAe,EACf,UAAwB,EACxB,WAA8B;QAEtC,cAAc;QACN,WAAwB,EACxB,YAA0B,EAC1B,aAA4B,EAC5B,YAA0B;QAV1B,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QACpB,YAAO,GAAP,OAAO,CAAQ;QACf,eAAU,GAAV,UAAU,CAAc;QACxB,gBAAW,GAAX,WAAW,CAAmB;QAG9B,gBAAW,GAAX,WAAW,CAAa;QACxB,iBAAY,GAAZ,YAAY,CAAc;QAC1B,kBAAa,GAAb,aAAa,CAAe;QAC5B,iBAAY,GAAZ,YAAY,CAAc;QAf5B,eAAU,GAAY,KAAK,CAAC;QAC5B,YAAO,GAAY,KAAK,CAAC;QACzB,eAAU,GAAW,CAAC,CAAC;QAc/B,IAAI,IAAI,GAAG,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QACjC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IAClB,CAAC;IAED,2BAAQ,GAAR;QACG,IAAI,CAAC,SAAS,EAAE,CAAC;QAEjB,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAEzB,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,CAAC,CAAC,CAAC;YACrC,IAAI,CAAC,eAAe,EAAE,CAAC;QAC3B,CAAC;IACJ,CAAC;IAEA,uBAAI,GAAJ;QACE,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC;YACnD,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;gBACb,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;gBACpB,IAAI,CAAC,UAAU,EAAE,CAAC;YACtB,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;IACvC,CAAC;IAED,yBAAM,GAAN;QACE,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC;YACrD,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;gBACb,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;gBACrB,IAAI,CAAC,UAAU,EAAE,CAAC;YACtB,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;IACvC,CAAC;IAED,oCAAiB,GAAjB;QACE,IAAI,OAAO,CAAC;QACZ,IAAI,IAAI,GAAG,IAAI,CAAC;QAEhB,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,UAAC,cAA8B;YACvF,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;YAC1B,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;gBACf,IAAI,CAAC,UAAU,GAAG,cAAc,CAAC,UAAU,CAAC;YAC9C,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;IACvC,CAAC;IAED,kCAAe,GAAf;QACE,IAAI,OAAO,CAAC;QACZ,IAAI,IAAI,GAAG,IAAI,CAAC;QAEhB,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,UAAC,YAA0B;YAC/E,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;gBACf,IAAI,CAAC,UAAU,GAAG,YAAY,CAAC,UAAU,CAAC;gBAC1C,IAAI,CAAC,OAAO,GAAG,YAAY,CAAC,OAAO,CAAC;YACtC,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;IACvC,CAAC;IAED,4BAAS,GAAT;QACE,IAAI,OAAO,CAAC;QACZ,IAAI,IAAI,GAAG,IAAI,CAAC;QAEhB,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,UAAS,IAAI;YACnE,IAAI,GAAG,GAAG,qCAAqC,GAAG,IAAI,CAAC,IAAI,GAAG,qDAAqD,CAAC;YAC/G,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,uBAAuB,CAAC,sMAAsM,GAAG,GAAG,GAAG,qIAAqI,CAAC,CAAC;YAEhZ,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;gBACf,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;YACnB,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACjC,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;IACvC,CAAC;IAED,8BAAW,GAAX;QACE,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC;YAC1D,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;gBACb,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;gBACvB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC;YACvD,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;IACvC,CAAC;IAED,iCAAc,GAAd;QACE,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC;YAC7D,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;gBACb,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;gBACxB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,8BAA8B,CAAC,CAAC;YAC3D,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;IACvC,CAAC;IAED,8BAAW,GAAX;QACE,IAAI,IAAI,GAAG,IAAI,CAAC;QAEhB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,kBAAkB,EAAE,EAAC,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,EAAC,CAAC,CAAC;IACtF,CAAC;IAED,iCAAc,GAAd,UAAe,OAAO;QACpB,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,EAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAC,CAAC,CAAC;QACzE,OAAO,CAAC,OAAO,CAAC;YACd,EAAE,EAAE,OAAO;SACZ,CAAC,CAAC;IACL,CAAC;IA1IU,QAAQ;QALpB,wEAAS,CAAC;YACT,QAAQ,EAAE,WAAW;YACrB,WAAW,EAAE,WAAW;WACqC;SAC9D,CAAC;6EASgC;YACX,8DAAS;YACX,+EAAM;YACH,wEAAY;YACX,gFAAiB;YAGjB,iFAAW;YACV,mFAAY;YACX,kFAAa;YACd,KAAY;OAlBzB,QAAQ,CA2IpB;IAAD,CAAC;AAAA;SA3IY,QAAQ,e","file":"8.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\n\r\nimport { ClipPage } from './clip';\r\nimport { PipesModule } from '../../app/pipes/pipes.module';\r\nimport { ComponentModule } from '../../app/components/component.module';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ClipPage\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ClipPage),\r\n    PipesModule.forRoot(),\r\n    ComponentModule.forRoot()\r\n  ],\r\n  providers: [\r\n  ],\r\n  entryComponents: [\r\n    ClipPage\r\n  ]\r\n})\r\nexport class ClipPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/clip/clip.module.ts","/* Core */\r\nimport { Component, NgZone, OnInit, ViewEncapsulation } from '@angular/core';\r\nimport { IonicPage, NavController, PopoverController } from 'ionic-angular';\r\nimport { NavParams } from 'ionic-angular';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\n\r\n/* Services */\r\nimport { ClipsService } from '../../app/services/clips.service';\r\nimport { LoaderService } from '../../app/services/loader.service';\r\nimport { ToastService } from '../../app/services/toast.service';\r\nimport { ClipUserInfo } from '../../app/models/clip-user-info.model';\r\nimport { AuthService } from '../../app/services/auth.service';\r\nimport { ClipPublicInfo } from '../../app/models/clip-publicinfo.model';\r\n\r\n@IonicPage({\r\n  defaultHistory: ['trending'],\r\n  name: 'clip',\r\n  segment: 'clip/:slug'\r\n})\r\n@Component({\r\n  selector: 'page-clip',\r\n  templateUrl: 'clip.html',\r\n  styles: ['.no-padding {padding: 0;} .no-margin {margin: 0;}']\r\n})\r\nexport class ClipPage implements OnInit {\r\n\tpublic clip: any;\r\n\tprivate slug: string;\r\n  private isFavorite: boolean = false;\r\n  private isLiked: boolean = false;\r\n  private likesCount: number = 0;\r\n\r\n\tconstructor(\r\n    private navCtrl: NavController,\r\n    private navParams: NavParams,\r\n    private _ngZone: NgZone,\r\n    private _sanitizer: DomSanitizer,\r\n    private popoverCtrl: PopoverController,\r\n\r\n    /* Services */\r\n    private authService: AuthService,\r\n    private clipsService: ClipsService,\r\n    private loaderService: LoaderService,\r\n    private toastService: ToastService) {\r\n\t\tlet slug = navParams.get('slug');\r\n\t\tthis.slug = slug;\r\n\t}\r\n\r\n\tngOnInit() {\r\n    this.getBySlug();\r\n\r\n    this.getClipPublicInfo();\r\n\r\n    if (this.authService.isAuthenticated()) {\r\n        this.getClipUserInfo();\r\n    }\r\n\t}\r\n\r\n  like() {\r\n    let that = this;\r\n    let promise = this.clipsService.like(this.slug).then(() => {\r\n      that._ngZone.run(() => {\r\n          that.isLiked = true;\r\n          that.likesCount++;\r\n      });\r\n    });\r\n\r\n    this.toastService.onFailure(promise);\r\n  }\r\n\r\n  unlike() {\r\n    let that = this;\r\n    let promise = this.clipsService.unlike(this.slug).then(() => {\r\n      that._ngZone.run(() => {\r\n          that.isLiked = false;\r\n          that.likesCount--;\r\n      });\r\n    });\r\n\r\n    this.toastService.onFailure(promise);\r\n  }\r\n\r\n  getClipPublicInfo() {\r\n    let promise;\r\n    let that = this;\r\n\r\n    promise = this.clipsService.getPublicInfo(this.slug).then((clipPublicInfo: ClipPublicInfo) => {\r\n      console.log(clipPublicInfo);\r\n        that._ngZone.run(() => {\r\n          that.likesCount = clipPublicInfo.likesCount;\r\n        });\r\n    });\r\n\r\n    that.toastService.onFailure(promise);\r\n  }\r\n\r\n  getClipUserInfo() {\r\n    let promise;\r\n    let that = this;\r\n\r\n    promise = this.clipsService.getUserInfo(this.slug).then((clipUserInfo: ClipUserInfo) => {\r\n        that._ngZone.run(() => {\r\n          that.isFavorite = clipUserInfo.isFavorite;\r\n          that.isLiked = clipUserInfo.isLiked;\r\n        });\r\n    });\r\n\r\n    that.toastService.onFailure(promise);\r\n  }\r\n\r\n  getBySlug() {\r\n    let promise;\r\n    let that = this;\r\n\r\n    promise = this.clipsService.getBySlug(this.slug).then(function(clip) {\r\n    let src = 'https://clips.twitch.tv/embed?clip=' + clip.slug + '&tt_medium=clips_api&tt_content=embed&autoplay=true';\r\n         clip.embedHtml = that._sanitizer.bypassSecurityTrustHtml(\"<div style='overflow: hidden; padding-bottom: 56.25%; position: relative; height: 0;' class='video-responsive'><iframe style='left: 0; top: 0; height: 100%; width: 100%; position: absolute;' src='\" + src + \"' width='100%' height='100%' muted='false' frameborder='0' scrolling='no' allowfullscreen='true' preload='metadata'></iframe></div>\");\r\n\r\n        that._ngZone.run(() => {\r\n          that.clip = clip;\r\n        });\r\n    });\r\n\r\n    that.loaderService.show(promise);\r\n    that.toastService.onFailure(promise);\r\n  }\r\n\r\n  addFavorite() {\r\n    let that = this;\r\n    let promise = this.clipsService.addFavorite(this.slug).then(function() {\r\n      that._ngZone.run(() => {\r\n          that.isFavorite = true;\r\n          that.toastService.show('Added clip to favorites.');\r\n      });\r\n    });\r\n\r\n    this.toastService.onFailure(promise);\r\n  }\r\n\r\n  removeFavorite() {\r\n    let that = this;\r\n    let promise = this.clipsService.removeFavorite(this.slug).then(function() {\r\n      that._ngZone.run(() => {\r\n          that.isFavorite = false;\r\n          that.toastService.show('Removed clip from favorites.');\r\n      });\r\n    });\r\n\r\n    this.toastService.onFailure(promise);\r\n  }\r\n\r\n  goToChannel() {\r\n    let that = this;\r\n\r\n    that.navCtrl.push('trending-channel', {channel: that.clip.broadcaster.displayName});\r\n  }\r\n\r\n  presentPopover(myEvent) {\r\n    let that = this;\r\n    let popover = this.popoverCtrl.create('clip-popover', {slug: that.slug});\r\n    popover.present({\r\n      ev: myEvent\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/clip/clip.ts"],"sourceRoot":""}